# CLARAOKE (WIP)

CLARAOKE is a system for writing karaoke typesetting according to ASS format. (Advanced Substation Alpha)

Author: _Panji Kusuma <epanji@gmail.com>_

## Progress

```common-lisp

CL-USER> (ql:quickload "claraoke-user")
("claraoke-user")

CL-USER> (in-package :claraoke-user)
#<PACKAGE "CLARAOKE-USER">

CLARAOKE-USER> (color "AquaMarine")
#<&HD4FF7F&>

CLARAOKE-USER> (color "aquamarine")
#<&HD4FF7F&>

CLARAOKE-USER> (color "aqua-marine")
#<&HD4FF7F&>

CLARAOKE-USER> (defparameter *mysub* (subtitle "mysub"))
*MYSUB*

CLARAOKE-USER> (defparameter *mydia* (last-event *mysub*))
*MYDIA*

CLARAOKE-USER> (setf (text *mydia*) (text "berjalan di hutan cemara" :generate-overrides-p t)
                     (start *mydia*) "5.00"
                     (duration-length *mydia*) "2.00")
#<#<00:00:05.00> --> #<00:00:07.00> "berjalan di hutan cemara" (9)>

CLARAOKE-USER> (insert-event *mysub* (dialogue "langkahku terasa kecil dan lelah"
                                               :start "8.00" :duration "5.00"
                                               :generate-overrides-p t))
(#<#<00:00:08.00> --> #<00:00:13.00> "langkahku terasa kecil dan lelah" (10)>
 #<#<00:00:05.00> --> #<00:00:07.00> "berjalan di hutan cemara" (9)>)

CLARAOKE-USER> (insert-event *mysub* (dialogue "makin dalam lagi"
                                               :start "14.00"
                                               :end "16.00"
                                               :generate-overrides-p t))
(#<#<00:00:14.00> --> #<00:00:16.00> "makin dalam lagi" (6)>
 #<#<00:00:08.00> --> #<00:00:13.00> "langkahku terasa kecil dan lelah" (10)>
 #<#<00:00:05.00> --> #<00:00:07.00> "berjalan di hutan cemara" (9)>)

CLARAOKE-USER> (insert-event *mysub* (dialogue "ku ditelan fatamorgana"
                                               :start "17.00"
                                               :end "23.00"
                                               :generate-overrides-p t))
(#<#<00:00:17.00> --> #<00:00:23.00> "ku ditelan fatamorgana" (9)>
 #<#<00:00:14.00> --> #<00:00:16.00> "makin dalam lagi" (6)>
 #<#<00:00:08.00> --> #<00:00:13.00> "langkahku terasa kecil dan lelah" (10)>
 #<#<00:00:05.00> --> #<00:00:07.00> "berjalan di hutan cemara" (9)>)

CLARAOKE-USER> (claraoke-subtitle-to-file *mysub* #p"/tmp/mysub.ass" :if-exists :supersede)
#<SUBTITLE "mysub" {100B734BF3}>

CLARAOKE-USER> (claraoke-subtitle-dummy-video *mysub* #p"/tmp/mysub.mp4")
#P"/tmp/mysub.mp4"

CLARAOKE-USER> (print-script *mysub*)
[Script Info]
; Script generated by CLARAOKE v0.0.2 ( https://github.com/epanji/claraoke )
Title: mysub
ScriptType: v4.00+
Collisions: Normal
PlayResX: 1366
PlayResY: 768
PlayDepth: 0
Timer: 100,0000
WrapStyle: 0
Video Aspect Ratio: 0
Video Zoom: 0
Video Position: 0

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,48,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,0,2,25,25,25,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,00:00:05.00,00:00:07.00,Default,,0,0,0,,{\k15}ber{\k15}ja{\k15}lan {\k15}di {\k15}hu{\k15}tan {\k15}ce{\k15}ma{\k15}ra
Dialogue: 0,00:00:08.00,00:00:13.00,Default,,0,0,0,,{\k30}langkah{\k15}ku {\k15}te{\k15}ra{\k15}sa {\k15}ke{\k15}cil {\k15}dan {\k15}le{\k15}lah
Dialogue: 0,00:00:14.00,00:00:16.00,Default,,0,0,0,,{\k15}ma{\k15}kin {\k15}da{\k15}lam {\k15}la{\k15}gi
Dialogue: 0,00:00:17.00,00:00:23.00,Default,,0,0,0,,{\k15}ku {\k15}di{\k15}te{\k15}lan {\k15}fa{\k15}ta{\k15}mo{\k15}rga{\k15}na

#<SUBTITLE "mysub" {100B734BF3}>

CLARAOKE-USER> (defparameter *mysub2* (parse-script #p"/tmp/mysub.ass"))
*MYSUB2*

CLARAOKE-USER> (print-script *mysub2*)
[Script Info]
; Script generated by CLARAOKE v0.0.2 ( https://github.com/epanji/claraoke )
Title: mysub
ScriptType: v4.00+
Collisions: Normal
PlayResX: 1366
PlayResY: 768
PlayDepth: 0
Timer: 100,0000
WrapStyle: 0
Video Aspect Ratio: 0
Video Zoom: 0
Video Position: 0

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,48,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,0,2,25,25,25,1

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,00:00:05.00,00:00:07.00,Default,,0,0,0,,{\k15}ber{\k15}ja{\k15}lan {\k15}di {\k15}hu{\k15}tan {\k15}ce{\k15}ma{\k15}ra
Dialogue: 0,00:00:08.00,00:00:13.00,Default,,0,0,0,,{\k30}langkah{\k15}ku {\k15}te{\k15}ra{\k15}sa {\k15}ke{\k15}cil {\k15}dan {\k15}le{\k15}lah
Dialogue: 0,00:00:14.00,00:00:16.00,Default,,0,0,0,,{\k15}ma{\k15}kin {\k15}da{\k15}lam {\k15}la{\k15}gi
Dialogue: 0,00:00:17.00,00:00:23.00,Default,,0,0,0,,{\k15}ku {\k15}di{\k15}te{\k15}lan {\k15}fa{\k15}ta{\k15}mo{\k15}rga{\k15}na

#<SUBTITLE "mysub" {1001CB7003}>
```
